// main.js - 游戏入口与结局配置

(function() {
    const G = window.Game;

    // --- 注册所有结局 ---
    
    // 人性路结局
    G.addEnding('h_true', {
        title: "新时代的武神",
        text: "你与九柱并肩作战，以素流拳法打破了无惨的防御。在阳光下，你微笑着看着鬼王消散。你活了下来，在乡间开了一家小道场，名叫'素流'。义勇和实弥偶尔会来找你切磋。你终于守护了想要守护的世界。"
    });
    G.addEnding('h_hero', {
        title: "无名的守护者",
        text: "为了保护年轻的炭治郎，你用身体挡下了无惨的致命一击。在生命的最后一刻，你似乎看到了恋雪在河对岸向你招手。你没有遗憾，因为你以人类的身份战斗到了最后。"
    });
    G.addEnding('h_bad', {
        title: "遗憾的败北",
        text: "尽管你拼尽全力，但没有日轮刀的你始终无法对无惨造成致命伤。鬼杀队覆灭了。你在悔恨中倒下，世界陷入了长夜。"
    });

    // 鬼性路结局
    G.addEnding('d_redemption', {
        title: "狛治的回归",
        text: "在看到炼狱燃烧生命的姿态时，记忆的洪水冲垮了无惨的封印。你记起了恋雪。你反手向无惨挥拳，虽然立刻被处决，但你的灵魂在火中得到了净化。'欢迎回来，亲爱的。'她在那里等你。"
    });
    G.addEnding('d_king', {
        title: "至高破坏神",
        text: "你杀死了炼狱，杀死了炭治郎，甚至最后吞噬了无惨。你成为了新的鬼王，克服了阳光。但你在这个空荡荡的世界上，拥有无尽的时间和力量，却永远想不起自己到底遗忘了什么。"
    });
    G.addEnding('d_slave', {
        title: "永远的上弦",
        text: "你继续作为猗窝座存在，无休止地追求力量，直到时间尽头。你只是一个战斗机器，再无悲喜。"
    });

    // --- 启动游戏 ---
    console.log("RPG Initialized.");
    
    // 初始化界面
    G.updateTimeline(0);
    G.renderStats();
    
    // 进入第一个场景
    G.gotoScene('intro');
})();