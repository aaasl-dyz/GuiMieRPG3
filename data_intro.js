// data_intro.js - V12.1 ä¿®å¤ç‰ˆ
// ä¿®å¤äº† 'requires' å’Œ 'hideIf' ä¸ºå‡½æ•°

(function() {
    const G = window.Game;

    // --- 0. é€šç”¨ç»“å±€ (V12.1: ç§»è‡³ main.js) ---
    // (main.js ä¼¼ä¹å·²ç»åŒ…å«äº†ç»“å±€ï¼Œè¿™é‡Œä¸å†é‡å¤å®šä¹‰)


    // --- 1. åºç«  (å¤§æ­£1å¹´) ---
    G.addScene('intro', {
        title: "åºç« ï¼šè¡€è‰²é“åœº",
        image: "intro_blood.jpg",
        text: "å¤§æ­£1å¹´ã€‚ä½ æ˜¯<span class='key-plot-point'>ç‹›æ²»</span>ã€‚çœ¼å‰æ˜¯åœ°ç‹±ï¼šåº†è—å¸ˆå‚…å’Œæ‹é›ªå€’åœ¨æ¯’äº•æ—ï¼Œå°¸ä½“å·²ç»å†°å†·ã€‚ä½ çš„æœªå©šå¦»ã€ä½ çš„æ©å¸ˆ...ä½ ç”Ÿå‘½ä¸­å”¯ä¸€çš„å…‰ï¼Œç†„ç­äº†ã€‚è¿™è‚¡æ— æ³•éåˆ¶çš„ç‹‚æ€’å’Œæ‚²ç—›å³å°†æ’•è£‚ä½ çš„ç†å€¼ã€‚",
        choices: [
            { 
                text: "ğŸ©¸ 'æ€ï¼' (ä½ å¤±å»äº†ç†æ™º...å°†ä¸‹æ¯’çš„67åé—¨å¾’å…¨éƒ¨æ‰“æ­»ã€‚)", 
                action: (s, G) => { // V12.1: ä¼ é€’ s å’Œ G
                    G.triggerShake();
                    G.updateStats({str:10, dem:20, hum:-10, trait: 'avenger'});
                    // V12.1: G.state.trait = 'avenger' å·²è¢« G.updateStats å–ä»£
                    G.setResult("è·å¾—ç‰¹è´¨: ã€å¤ä»‡ä¹‹æ‹³ã€‘ (STRè·å–x1.2, HUMè·å–x0.8)", "bad");
                    G.gotoScene('scene_year2_demon_encounter', 0); // V12.1: æ¡¥æ¥é˜¶æ®µä¼šè‡ªåŠ¨+1å¹´,è¿™é‡Œä¼ 0
                } 
            },
            { 
                text: "ğŸ’§ 'æˆ‘...æˆ‘ä¸èƒ½å†æ€äººäº†ã€‚' (ä½ æ‰“æ–­äº†ä»–ä»¬æ¯ä¸€ä¸ªäººçš„éª¨å¤´ï¼Œä½†å¼ºè¡Œå‹åˆ¶ä½äº†æ€æ„...å®‰è‘¬äº†å¸ˆå‚…å’Œæ‹é›ªã€‚)", 
                action: (s, G) => {
                    G.updateStats({str:10, dem:5, hum:15, trait: 'guardian'});
                    G.setResult("è·å¾—ç‰¹è´¨: ã€å®ˆæŠ¤ä¹‹æ‹³ã€‘ (HUM/å¥½æ„Ÿè·å–x1.2)", "good");
                    G.gotoScene('scene_year2_human_encounter', 0);
                } 
            },
            { 
                text: "âšª '...' (ä½ æ²¡æœ‰å¤ä»‡ï¼Œæ„¤æ€’å·²ç»è¢«å·¨å¤§çš„ç©ºè™šæ‰€åå™¬...åƒä¸ªå¹½çµä¸€æ ·åœ¨ä¸–é—´æ¸¸è¡ã€‚)", 
                action: (s, G) => {
                    G.updateStats({hum:10, dem:10, str: 0, trait: 'void'}); // æ”¾å¼ƒäº†æ­¦é“
                    G.setResult("è·å¾—ç‰¹è´¨: ã€è™šæ— ä¹‹æ‹³ã€‘ (æ‰€æœ‰è·å–x1.1)");
                    G.gotoScene('scene_year2_human_encounter', 0);
                } 
            }
        ]
    });

    // --- 2. è·¯çº¿åˆ†æ­§ (å¤§æ­£2å¹´) ---

    G.addScene('scene_year2_human_encounter', {
        title: "å¤§æ­£2å¹´: ä¸»å…¬çš„æ´æ‰‹",
        image: "intro_human.jpg",
        text: "ä½ ç¦»å¼€äº†é“åœºï¼Œæ¼«æ— ç›®çš„åœ°æµæµªäº†ä¸€å¹´ã€‚ä½ å› é¥¥é¥¿å’ŒåŠ›ç«­å€’åœ¨é›ªåœ°ä¸­ï¼Œæ„è¯†å³å°†æ¨¡ç³Šã€‚ä¸€ä¸ªå£°éŸ³åœ¨ä½ è€³è¾¹å“èµ·ï¼š'å¯æ€œçš„å­©å­...ä½ èƒŒè´Ÿäº†å¤ªå¤šã€‚' é¬¼æ€é˜Ÿçš„ä¸»å…¬Â·äº§å±‹æ•·è€€å“‰æ‰¾åˆ°äº†ä½ ï¼Œä»–æ¸©æŸ”åœ°æ¡ä½äº†ä½ çš„æ‰‹ã€‚",
        choices: [
            { 
                text: "ï¼ˆæ¡ä½ä»–çš„æ‰‹ï¼‰'æˆ‘...æƒ³ç”¨è¿™åŒæ‹³å¤´å®ˆæŠ¤ç‚¹ä»€ä¹ˆã€‚'", 
                action: (s, G) => {
                    G.updateStats({hum:20, akaza_path: 'human'});
                    G.gotoScene('year3_human_training', 1); // å¼€å§‹ç¬¬ä¸€å¹´
                }
            },
            { 
                text: "ï¼ˆæ¨å¼€ä»–ï¼‰'åˆ«ç¢°æˆ‘ï¼æˆ‘çš„å‘½è¿ç”±æˆ‘è‡ªå·±å†³å®šï¼'", 
                action: (s, G) => G.showEnding('e_wanderer')
            }
        ]
    });

    G.addScene('scene_year2_demon_encounter', {
        title: "å¤§æ­£2å¹´: é¬¼ç‹é™ä¸´",
        image: "intro_demon.jpg",
        text: "ä½ åœ¨è¡€è…¥çš„é“åœºåºŸå¢Ÿä¸­åäº†ä¸€å¹´ï¼Œå¦‚åŒè¡Œå°¸èµ°è‚‰ã€‚ä¸€ä¸ªé£åº¦ç¿©ç¿©çš„ç”·äººå‡ºç°åœ¨ä½ é¢å‰ã€‚'çœŸæ˜¯å‡ºè‰²çš„ç ´ååŠ›...ä½ å¤©ç”Ÿå°±æ˜¯å¼ºè€…ã€‚' ä»–æ˜¯é¬¼ç‹Â·æ— æƒ¨ã€‚'ä½ ä¸æƒ³å¿˜è®°è¿™ä¸€åˆ‡å—ï¼Ÿå˜æˆé¬¼å§ï¼Œä½ å¯ä»¥æ‹¥æœ‰æ°¸æ’çš„åŠ›é‡ã€‚'",
        choices: [
            { 
                text: "ï¼ˆèµ°å‘æ— æƒ¨ï¼‰'æˆ‘éœ€è¦åŠ›é‡...å¿˜è®°ç—›è‹¦ï¼Œç ´åä¸€åˆ‡çš„åŠ›é‡ã€‚'", 
                action: (s, G) => {
                    G.updateStats({str:10, dem:30, akaza_path: 'demon', trait: 'destroyer'});
                    G.setResult("è·å¾—ç‰¹è´¨: ã€ç ´åä¹‹é¬¼ã€‘ (STRåˆ¤å®šéœ€æ±‚-10)", "bad");
                    G.gotoScene('year3_demon_adaptation', 1);
                }
            },
            { 
                text: "ï¼ˆæŒ¥æ‹³ï¼‰'æ€ªç‰©...æ»šå¼€ï¼'", 
                action: (s, G) => {
                    G.triggerShake();
                    G.updateStats({str:-10, dem:20, hum:5, akaza_path: 'demon', trait: 'defiant_demon'}); // åŠ›é‡å€’é€€
                    G.setResult("æ— æƒ¨è½»è”‘åœ°æŠ“ä½äº†ä½ çš„æ‹³å¤´ã€‚'æ„šè ¢ï¼Œä½†å¾ˆæœ‰éª¨æ°”ã€‚' ä»–é‡åˆ›äº†ä½ ï¼Œå¼ºè¡Œå°†ä»–çš„è¡€çŒå…¥äº†ä½ çš„ä½“å†…ã€‚", "bad");
                    G.gotoScene('year3_demon_forced_adaptation', 1);
                }
            }
        ]
    });

})();